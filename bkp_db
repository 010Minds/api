delimiter $$

CREATE DATABASE `mydb` /*!40100 DEFAULT CHARACTER SET latin1 */$$

delimiter $$

CREATE TABLE `operation` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `stock_id` int(11) NOT NULL,
  `qtd` varchar(45) NOT NULL,
  `value` varchar(45) NOT NULL,
  `type` varchar(1) NOT NULL,
  `action` varchar(8) NOT NULL COMMENT 'pending, rejected, accepted',
  `create_date` timestamp NULL DEFAULT NULL,
  `accepted_date` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1$$

delimiter $$

CREATE TABLE `stock` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(45) NOT NULL,
  `sigla` varchar(45) NOT NULL,
  `current` varchar(45) DEFAULT NULL,
  `open` varchar(45) DEFAULT NULL,
  `high` varchar(45) DEFAULT NULL,
  `low` varchar(45) DEFAULT NULL,
  `percent` varchar(45) DEFAULT NULL,
  `url` varchar(1000) DEFAULT NULL,
  `country` varchar(45) DEFAULT NULL,
  `updated_date` datetime DEFAULT NULL,
  `stock_exchange_id` int(11) NOT NULL,
  `volume` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `stock_exchange_id_idx` (`stock_exchange_id`),
  CONSTRAINT `stock_exchange_id` FOREIGN KEY (`stock_exchange_id`) REFERENCES `stock_exchange` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=27 DEFAULT CHARSET=latin1$$

delimiter $$

CREATE TABLE `stock_exchange` (
  `id` int(11) NOT NULL,
  `name` varchar(45) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1$$

delimiter $$

CREATE TABLE `user` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `mail` varchar(45) NOT NULL,
  `user` varchar(45) NOT NULL,
  `password` varchar(45) NOT NULL,
  `name` varchar(45) NOT NULL,
  `reais` decimal(19,3) NOT NULL DEFAULT '10000.000',
  `dollars` decimal(19,3) NOT NULL DEFAULT '0.000',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=latin1$$

delimiter $$

CREATE TABLE `user_stock` (
  `user_id` int(11) NOT NULL,
  `stock_id` int(11) NOT NULL,
  `qtd` varchar(45) NOT NULL,
  `value` varchar(45) DEFAULT NULL,
  `create_date` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`user_id`,`stock_id`),
  KEY `user_stock_FK1_idx` (`stock_id`),
  KEY `user_stock_FK2_idx` (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1$$


